<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:nodify="clr-namespace:Nodify;assembly=Nodify"
             xmlns:vm="clr-namespace:Jaguar.Desktop.ViewModels"
             xmlns:nodes="clr-namespace:Jaguar.Desktop.CustomViews.Nodes"
             xmlns:models="clr-namespace:Jaguar.Desktop.Models"
             x:DataType="vm:CanvasViewModel"
             x:Class="Jaguar.Desktop.Views.CanvasView">
    
    <UserControl.DataContext>
        <vm:CanvasViewModel />
    </UserControl.DataContext>
    
    <Grid Background="Transparent">
        <nodify:NodifyEditor ItemsSource="{Binding Nodes}"
                             GridCellSize="20">
        
            <nodify:NodifyEditor.Styles>
                <Style Selector="nodify|ItemContainer" x:DataType="models:FlowNode">
                    <Setter Property="Location" Value="{Binding Location, Mode=TwoWay}" />
                </Style>
            </nodify:NodifyEditor.Styles>
            
            <nodify:NodifyEditor.Background>
                <VisualBrush TileMode="Tile" SourceRect="0,0,30,30" DestinationRect="0,0,30,30">
                    <VisualBrush.Visual>
                        <Path Data="M 0 0 L 0 30 M 0 0 L 30 0" Stroke="#202020" StrokeThickness="0.5" />
                    </VisualBrush.Visual>
                </VisualBrush>
            </nodify:NodifyEditor.Background>
        
            <nodify:NodifyEditor.ItemTemplate>
                <DataTemplate>
                    <nodes:AgentNodeView/>
                </DataTemplate>
            </nodify:NodifyEditor.ItemTemplate>
        
        </nodify:NodifyEditor>
    </Grid>
</UserControl>